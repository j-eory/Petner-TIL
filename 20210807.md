# 2021.08.07

## 비동기 처리 방식 알아보기

* 비동기(asynchronous)란 
    언제 끝날지 모르는 작업을 기다리지 않고 다음 작업을 처리하게 하는 것
* 다트는 async와 await 키워드를 이용해 비동기 처리를 구현한다
    1. 함수 이름 뒤, 본문이 시작하는 중괄호 { 앞에 async 키워드를 붙여 비동기로 만든다.
    2. 비동기 함수 안에서 언제 끝날지 모르는 작업 앞에 await를 붙인다.
    3. 2번 작업을 마친 결과를 받기 위해 비동기 함수 이름 앞에 Future(값이 여러개면 Stream) 클래스를 지정한다.

* 함수의 이름 앞 뒤에 Future와 async가 붙으면 함수를 비동기로 만들겠다는 뜻이 된다.
    * 즉, 해당 함수 안에 await가 붙은 함수를 따로(비동기로) 처리한 다음, 그 결과는 Future에 저장해둘테니 먼저 해당 함수를 호출한 함수의 나머지 코드를 실행하라는 뜻이 된다.
    * 그리고 나머지 코드를 모두 실행했으면, 해당 함수의 나머지 코드를 실행한다. 
    (await가 붙은 함수의 처리와 반환이 완료될때까지 나머지 코드는 처리가 멈춰있음.
    await는 빈상자 future가 다 채워질 때까지 기다리라는뜻. 다 채워져야 다음으로 넘어간다.
    await 함수이름()은 함수이름()을 다 받아올 때까지 기다리라는 뜻임. 이걸 future에 저장하는듯?)
    * 비동기 함수에서 결과값이 필요하면 await를 써줌

** await

* await가 붙은 함수를 전체를 다 기다리고, 이 함수를 호출한 main? 같은 다른 함수의 나머지를 다 실행시킴. 
그 후에 await가 붙은 함수를 처리해준다.

* await가 안붙은 경우에는 그 함수 전체를 기다리는게 아니라, 비동기방식으로 처리되기만 하는듯
    duration : 1
    이렇게 1초 지연되게 처리해놓으면 얘 1초 기다리면서, 그 다음 함수도 동시에 처리해주는듯
    (동기방식이면 얘 1초 끝날때까지 다음 함수로 안넘어감)
    
=====


* 비동기함수가 반환한 값 처리하는 방법 : then

    * 반환값이 있는 비동기함수에서 반환값을 처리해 결과를 내보내야할 때
    함수이름 뒤에 .then을 붙여서 반환값을 처리할 수 있다.

    * 함수이름().then ((value) => {print(value)});
    value에다가 반환값을 넣어서 처리해준다!

    * future 함수에다가 반환값의 타입을 지정해놓을 수 있음
        Future<Stinrg>


    * 실행과정에서 생길 수 있는 오류를 잡아내는 키워드도 있음. : error() 함수
        * error 함수를 사용하면, 실행과정에서 오류가 발생했을 때 이 함수가 호출된다. 이걸 이용해서 오류를 처리할 수 있음


=====
